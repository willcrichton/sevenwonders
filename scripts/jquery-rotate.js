(function(e){for(var t,n=document.getElementsByTagName("head")[0].style,r=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],i=0;i<r.length;i++)void 0!==n[r[i]]&&(t=r[i]);var s="v"=="";jQuery.fn.extend({rotate:function(t){if(!(0===this.length||"undefined"==typeof t)){"number"==typeof t&&(t={angle:t});for(var n=[],r=0,i=this.length;r<i;r++){var s=this.get(r);if(!s.Wilq32||!s.Wilq32.PhotoEffect){var o=e.extend(!0,{},t),s=(new Wilq32.PhotoEffect(s,o))._rootObj;n.push(e(s))}else s.Wilq32.PhotoEffect._handleRotation(t)}return n}},getRotateAngle:function(){for(var e=[],t=0,n=this.length;t<n;t++){var r=this.get(t);r.Wilq32&&r.Wilq32.PhotoEffect&&(e[t]=r.Wilq32.PhotoEffect._angle)}return e},stopRotate:function(){for(var e=0,t=this.length;e<t;e++){var n=this.get(e);n.Wilq32&&n.Wilq32.PhotoEffect&&clearTimeout(n.Wilq32.PhotoEffect._timer)}}});Wilq32=window.Wilq32||{};Wilq32.PhotoEffect=function(){return t?function(e,t){e.Wilq32={PhotoEffect:this};this._img=this._rootObj=this._eventObj=e;this._handleRotation(t)}:function(e,t){this._img=e;this._rootObj=document.createElement("span");this._rootObj.style.display="inline-block";this._rootObj.Wilq32={PhotoEffect:this};e.parentNode.insertBefore(this._rootObj,e);if(e.complete)this._Loader(t);else{var n=this;jQuery(this._img).bind("load",function(){n._Loader(t)})}}}();Wilq32.PhotoEffect.prototype={_setupParameters:function(e){this._parameters=this._parameters||{};"number"!==typeof this._angle&&(this._angle=0);"number"===typeof e.angle&&(this._angle=e.angle);this._parameters.animateTo="number"===typeof e.animateTo?e.animateTo:this._angle;this._parameters.step=e.step||this._parameters.step||null;this._parameters.easing=e.easing||this._parameters.easing||function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n};this._parameters.duration=e.duration||this._parameters.duration||1e3;this._parameters.callback=e.callback||this._parameters.callback||function(){};e.bind&&e.bind!=this._parameters.bind&&this._BindEvents(e.bind)},_handleRotation:function(e){this._setupParameters(e);this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()},_BindEvents:function(e){if(e&&this._eventObj){if(this._parameters.bind){var t=this._parameters.bind,n;for(n in t)t.hasOwnProperty(n)&&jQuery(this._eventObj).unbind(n,t[n])}this._parameters.bind=e;for(n in e)e.hasOwnProperty(n)&&jQuery(this._eventObj).bind(n,e[n])}},_Loader:function(){return s?function(e){var t=this._img.width,n=this._img.height;this._img.parentNode.removeChild(this._img);this._vimage=this.createVMLNode("image");this._vimage.src=this._img.src;this._vimage.style.height=n+"px";this._vimage.style.width=t+"px";this._vimage.style.position="absolute";this._vimage.style.top="0px";this._vimage.style.left="0px";this._container=this.createVMLNode("group");this._container.style.width=t;this._container.style.height=n;this._container.style.position="absolute";this._container.setAttribute("coordsize",t-1+","+(n-1));this._container.appendChild(this._vimage);this._rootObj.appendChild(this._container);this._rootObj.style.position="relative";this._rootObj.style.width=t+"px";this._rootObj.style.height=n+"px";this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._eventObj=this._rootObj;this._handleRotation(e)}:function(e){this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._width=this._img.width;this._height=this._img.height;this._widthHalf=this._width/2;this._heightHalf=this._height/2;var t=Math.sqrt(this._height*this._height+this._width*this._width);this._widthAdd=t-this._width;this._heightAdd=t-this._height;this._widthAddHalf=this._widthAdd/2;this._heightAddHalf=this._heightAdd/2;this._img.parentNode.removeChild(this._img);this._aspectW=(parseInt(this._img.style.width,10)||this._width)/this._img.width;this._aspectH=(parseInt(this._img.style.height,10)||this._height)/this._img.height;this._canvas=document.createElement("canvas");this._canvas.setAttribute("width",this._width);this._canvas.style.position="relative";this._canvas.style.left=-this._widthAddHalf+"px";this._canvas.style.top=-this._heightAddHalf+"px";this._canvas.Wilq32=this._rootObj.Wilq32;this._rootObj.appendChild(this._canvas);this._rootObj.style.width=this._width+"px";this._rootObj.style.height=this._height+"px";this._eventObj=this._canvas;this._cnv=this._canvas.getContext("2d");this._handleRotation(e)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer);this._animateStartTime=+(new Date);this._animateStartAngle=this._angle;this._animate()},_animate:function(){var e=+(new Date),t=e-this._animateStartTime>this._parameters.duration;if(t&&!this._parameters.animatedGif)clearTimeout(this._timer);else{(this._canvas||this._vimage||this._img)&&this._rotate(~~(10*this._parameters.easing(0,e-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration))/10);this._parameters.step&&this._parameters.step(this._angle);var n=this;this._timer=setTimeout(function(){n._animate.call(n)},10)}this._parameters.callback&&t&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var e=Math.PI/180;return s?function(e){this._angle=e;this._container.style.rotation=e%360+"deg"}:t?function(e){this._angle=e;this._img.style[t]="rotate("+e%360+"deg)"}:function(t){this._angle=t;t=t%360*e;this._canvas.width=this._width+this._widthAdd;this._canvas.height=this._height+this._heightAdd;this._cnv.translate(this._widthAddHalf,this._heightAddHalf);this._cnv.translate(this._widthHalf,this._heightHalf);this._cnv.rotate(t);this._cnv.translate(-this._widthHalf,-this._heightHalf);this._cnv.scale(this._aspectW,this._aspectH);this._cnv.drawImage(this._img,0,0)}}()};s&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<rvml:"+e+' class="rvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())})(jQuery);(function(e){function t(e){var t=e.data("_ARS_data");if(!t){t={rotateUnits:"deg",scale:1,rotate:0};e.data("_ARS_data",t)}return t}function n(e,t){e.css("transform","rotate("+t.rotate+t.rotateUnits+") scale("+t.scale+","+t.scale+")")}e.fn.rotate=function(r){var i=e(this),s,o=t(i);if(typeof r=="undefined"){return o.rotate+o.rotateUnits}s=r.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/);if(s){if(s[3]){o.rotateUnits=s[3]}o.rotate=s[1];n(i,o)}return this};e.fn.scale=function(r){var i=e(this),s=t(i);if(typeof r=="undefined"){return s.scale}s.scale=r;n(i,s);return this};var r=e.fx.prototype.cur;e.fx.prototype.cur=function(){if(this.prop=="rotate"){return parseFloat(e(this.elem).rotate())}else if(this.prop=="scale"){return parseFloat(e(this.elem).scale())}return r.apply(this,arguments)};e.fx.step.rotate=function(n){var r=t(e(n.elem));e(n.elem).rotate(n.now+r.rotateUnits)};e.fx.step.scale=function(t){e(t.elem).scale(t.now)};var i=e.fn.animate;e.fn.animate=function(n){if(typeof n["rotate"]!="undefined"){var r,s,o=n["rotate"].toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);if(o&&o[5]){r=e(this);s=t(r);s.rotateUnits=o[5]}n["rotate"]=o[1]}return i.apply(this,arguments)}})(jQuery)